<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fast Pseudo Random Number Generators • dqrng</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Fast Pseudo Random Number Generators">
<meta property="og:description" content="Several fast random number generators are provided as C++
  header only libraries: The PCG family by O'Neill (2014
  &lt;https://www.cs.hmc.edu/tr/hmc-cs-2014-0905.pdf&gt;) as well as
  Xoroshiro128+ and Xoshiro256+ by Blackman and Vigna (2018
  &lt;arXiv:1805.01407&gt;). In addition fast functions for generating random
  numbers according to a uniform, normal and exponential distribution
  are included. The latter two use the Ziggurat algorithm originally
  proposed by Marsaglia and Tsang (2000, &lt;doi:10.18637/jss.v005.i08&gt;).
  These functions are exported to R and as a C++ interface and are
  enabled for use with the default 64 bit generator from the PCG family,
  Xoroshiro128+ and Xoshiro256+ as well as the 64 bit version of the 20 rounds
  Threefry engine (Salmon et al., 2011 &lt;doi:10.1145/2063384.2063405&gt;) as
  provided by the package 'sitmo'.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dqrng</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/dqrng.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/cpp-api.html">C++ API</a>
    </li>
    <li>
      <a href="articles/parallel.html">Parallel RNG usage</a>
    </li>
    <li>
      <a href="articles/tests_and_coverage.html">Tests and Coverage</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/daqana/dqrng">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="dqrng" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#dqrng" class="anchor"></a>dqrng</h1></div>
<p>The dqrng package provides fast random number generators (RNG) with good statistical properties for usage with R. It combines these RNGs with fast distribution functions to sample from uniform, normal or exponential distributions. Both the RNGs and the distribution functions are distributed as C++ header-only library.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The currently released version is available from CRAN via</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"dqrng"</span>)</a></code></pre></div>
<p>Intermediate releases can also be obtained via <a href="https://cran.r-project.org/package=drat">drat</a>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ns-load">requireNamespace</a></span>(<span class="st">"drat"</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)) <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"drat"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">drat<span class="op">::</span><span class="kw">addRepo</span>(<span class="st">"daqana"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"dqrng"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Using the provided RNGs from R is deliberately similar to using R’s build-in RNGs:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dqrng)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="reference/dqrng-functions.html">dqset.seed</a></span>(<span class="dv">42</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw"><a href="reference/dqrng-functions.html">dqrunif</a></span>(<span class="dv">5</span>, <span class="dt">min =</span> <span class="dv">2</span>, <span class="dt">max =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; [1] 9.211802 2.616041 6.236331 4.588535 5.764814</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="kw"><a href="reference/dqrng-functions.html">dqrexp</a></span>(<span class="dv">5</span>, <span class="dt">rate =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; [1] 0.35118613 0.17656197 0.06844976 0.16984095 0.10096744</span></a></code></pre></div>
<p>They are quite a bit faster, though:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">N &lt;-<span class="st"> </span><span class="fl">1e4</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">bm &lt;-<span class="st"> </span>bench<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/bench/topics/mark">mark</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(N), <span class="kw"><a href="reference/dqrng-functions.html">dqrnorm</a></span>(N), <span class="dt">check =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">bm[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; # A tibble: 2 x 5</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;   expression      min   median `itr/sec` mem_alloc</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; 1 rnorm(N)    758.5µs  794.8µs     1246.    83.1KB</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; 2 dqrnorm(N)   80.9µs   88.1µs    10719.    80.7KB</span></a></code></pre></div>
<p>This is also true for the provided sampling functions with replacement:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">m &lt;-<span class="st"> </span><span class="fl">1e7</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">n &lt;-<span class="st"> </span><span class="fl">1e5</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">bm &lt;-<span class="st"> </span>bench<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/bench/topics/mark">mark</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample.int</a></span>(m, n, <span class="dt">replace =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">                  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample.int</a></span>(<span class="fl">1e3</span><span class="op">*</span>m, n, <span class="dt">replace =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">                  <span class="kw"><a href="reference/dqsample.html">dqsample.int</a></span>(m, n, <span class="dt">replace =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">                  <span class="kw"><a href="reference/dqsample.html">dqsample.int</a></span>(<span class="fl">1e3</span><span class="op">*</span>m, n, <span class="dt">replace =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">                  <span class="dt">check =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">bm[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; # A tibble: 4 x 5</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;   expression                                     min   median `itr/sec`</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;   &lt;bch:expr&gt;                                &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 1 sample.int(m, n, replace = TRUE)            7.66ms   7.74ms      128.</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 2 sample.int(1000 * m, n, replace = TRUE)     9.24ms   9.47ms      105.</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 3 dqsample.int(m, n, replace = TRUE)        357.19µs 389.03µs     2527.</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; 4 dqsample.int(1000 * m, n, replace = TRUE) 406.04µs 452.27µs     1756.</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; # … with 1 more variable: mem_alloc &lt;bch:byt&gt;</span></a></code></pre></div>
<p>And without replacement:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">bm &lt;-<span class="st"> </span>bench<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/bench/topics/mark">mark</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample.int</a></span>(m, n),</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">                  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample.int</a></span>(<span class="fl">1e3</span><span class="op">*</span>m, n),</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">                  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample.int</a></span>(m, n, <span class="dt">useHash =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">                  <span class="kw"><a href="reference/dqsample.html">dqsample.int</a></span>(m, n),</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">                  <span class="kw"><a href="reference/dqsample.html">dqsample.int</a></span>(<span class="fl">1e3</span><span class="op">*</span>m, n),</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">                  <span class="dt">check =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; Warning: Some expressions had a GC in every iteration; so filtering is</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; disabled.</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9">bm[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; # A tibble: 5 x 5</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;   expression                            min   median `itr/sec` mem_alloc</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;   &lt;bch:expr&gt;                       &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; 1 sample.int(m, n)                   43.2ms  43.67ms      20.3   38.53MB</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; 2 sample.int(1000 * m, n)           12.38ms  12.73ms      77.2    1.76MB</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; 3 sample.int(m, n, useHash = TRUE)  10.43ms  10.89ms      90.8    1.38MB</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; 4 dqsample.int(m, n)                 1.44ms   1.81ms     553.   390.67KB</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; 5 dqsample.int(1000 * m, n)           1.9ms   2.32ms     415.    781.3KB</span></a></code></pre></div>
<p>Note that sampling from <code>10^10</code> elements triggers “long-vector support” in R.</p>
<p>In addition the RNGs provide support for multiple independent streams for parallel usage:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">N &lt;-<span class="st"> </span><span class="fl">1e7</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="reference/dqrng-functions.html">dqset.seed</a></span>(<span class="dv">42</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">u1 &lt;-<span class="st"> </span><span class="kw"><a href="reference/dqrng-functions.html">dqrunif</a></span>(N)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw"><a href="reference/dqrng-functions.html">dqset.seed</a></span>(<span class="dv">42</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">u2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/dqrng-functions.html">dqrunif</a></span>(N)</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/cor">cor</a></span>(u1, u2)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; [1] -0.0005787967</span></a></code></pre></div>
</div>
<div id="feedback" class="section level2">
<h2 class="hasAnchor">
<a href="#feedback" class="anchor"></a>Feedback</h2>
<p>All feedback (bug reports, security issues, feature requests, …) should be provided as <a href="https://github.com/daqana/dqrng/issues">issues</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=dqrng">https://​cloud.r-project.org/​package=dqrng</a>
</li>
<li>Browse source code at <br><a href="https://github.com/daqana/dqrng">https://​github.com/​daqana/​dqrng</a>
</li>
<li>Report a bug at <br><a href="https://github.com/daqana/dqrng/issues">https://​github.com/​daqana/​dqrng/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Ralf Stubner <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/daqana/dqrng"><img src="https://travis-ci.org/daqana/dqrng.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/rstub/dqrng"><img src="https://ci.appveyor.com/api/projects/status/github/daqana/dqrng?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://cran.r-project.org/package=dqrng"><img src="https://www.r-pkg.org/badges/version/dqrng" alt="CRAN status"></a></li>
<li><a href="https://codecov.io/github/daqana/dqrng?branch=master"><img src="https://codecov.io/gh/daqana/dqrng/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://www.r-pkg.org/pkg/dqrng"><img src="https://cranlogs.r-pkg.org/badges/dqrng?color=brightgreen" alt="Downloads"></a></li>
<li><a href="https://bestpractices.coreinfrastructure.org/projects/2157"><img src="https://bestpractices.coreinfrastructure.org/projects/2157/badge" alt="CII Best Practices"></a></li>
<li><a href="https://www.codacy.com/app/rstub/dqrng?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=daqana/dqrng&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/cc38be1f5900415a84010acd9ef85ce1" alt="Codacy Badge"></a></li>
<li><a href="https://cran.r-project.org/package=dqrng"><img src="https://tinyverse.netlify.com/badge/dqrng" alt="Dependencies"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ralf Stubner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
